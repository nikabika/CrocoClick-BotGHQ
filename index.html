<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>main - Начать</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Bubblegum+Sans&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'apple-blue': '#007AFF',
                        'apple-gray': '#8E8E93',
                        'light-gray': '#F2F2F7',
                        'border-gray': '#C6C6C8'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bubblegum+Sans&display=swap');
        
        .main-font {
            font-family: 'Bubblegum Sans', cursive;
        }
        
        /* Убираем все эффекты при наведении */
        button, input, .avatar-circle {
            transition: all 0.3s ease;
        }
        button:hover, input:hover, .avatar-circle:hover {
            transform: none !important;
        }

        /* Анимация открытия модального окна */
        .modal-enter {
            animation: modalEnter 0.2s ease-out;
        }
        
        @keyframes modalEnter {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Анимация закрытия модального окна */
        .modal-exit {
            animation: modalExit 0.15s ease-in;
        }
        
        @keyframes modalExit {
            from {
                opacity: 1;
                transform: scale(1);
            }
            to {
                opacity: 0;
                transform: scale(0.95);
            }
        }

        /* Фоновая картинка */
        .background-image {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://cdn.qwenlm.ai/72327e40-02c9-46e7-a011-0542655a56ad/5cfe6123-3f94-4156-8f0d-4f770a2b7a4b_%D0%98%D0%BB%D0%BB%D1%8E%D1%81%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F_%D0%B1%D0%B5%D0%B7_%D0%BD%D0%B0%D0%B7%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F.png?key=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyZXNvdXJjZV91c2VyX2lkIjoiNzIzMjdlNDAtMDJjOS00NmU3LWEwMTEtMDU0MjY1NWE1NmFkIiwicmVzb3VyY2VfaWQiOiI1Y2ZlNjEyMy0zZjk0LTQxNTYtOGYwZC00Zjc3MGEyYjdhNGIiLCJyZXNvdXJjZV9jaGF0X2lkIjpudWxsfQ.yFMFs7hKN7tqA3bnLy5Wi8Qj2AzApbL1PDMGhLYaQfU&x-oss-process=image/resize,m_mfit,w_320,h_320');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            z-index: -1;
        }

        /* Адаптация для мобил */
        @media (max-width: 640px) {
            .container-mobile {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            .avatar-mobile {
                width: 120px;
                height: 120px;
            }
        }
    </style>
</head>
<body class="bg-white min-h-screen flex flex-col">
    <!-- Фоновая картинка -->
    <div class="background-image"></div>

    <!-- Модальное окно анонимности -->
    <div id="anonymousModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-3xl p-6 mx-4 max-w-sm w-full modal-enter relative">
            <!-- Крестик закрытия -->
            <button onclick="closeAnonymousModal()" class="absolute top-4 right-4 w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600">
                <i class="fas fa-times text-xl"></i>
            </button>
            
            <!-- Картинка -->
            <div class="mb-4 mt-2">
                <img src="https://cdn.qwenlm.ai/72327e40-02c9-46e7-a011-0542655a56ad/c848bb5d-fb06-466f-a731-4809c84be867_%D0%98%D0%BB%D0%BB%D1%8E%D1%81%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F_%D0%B1%D0%B5%D0%B7_%D0%BD%D0%B0%D0%B7%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F.png?key=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyZXNvdXJjZV91c2VyX2lkIjoiNzIzMjdlNDAtMDJjOS00NmU3LWEwMTEtMDU0MjY1NWE1NmFkIiwicmVzb3VyY2VfaWQiOiJjODQ4YmI1ZC1mYjA2LTQ2NmYtYTczMS00ODA5Yzg0YmU4NjciLCJyZXNvdXJjZV9jaGF0X2lkIjpudWxsfQ.rILpn6Sm2rVGCMJ5dgT2y76CONAXaYwDk_pp_IUaInc&x-oss-process=image/resize,m_mfit,w_320,h_320" 
                     alt="Анонимность" 
                     class="w-full h-32 object-cover rounded-2xl">
            </div>
            
            <!-- Заголовок и описание -->
            <div class="space-y-3">
                <h3 class="text-xl font-semibold text-gray-900">Анонимность</h3>
                <p class="text-gray-600 text-sm leading-relaxed">
                    Регистрация без показа личных данных. Ваши истории будут публиковаться без привязки к реальной личности.
                </p>
            </div>

            <!-- Кнопка Продолжить -->
            <button onclick="closeAnonymousModal()" class="w-full mt-6 bg-apple-blue rounded-2xl py-4 px-6 border-0 flex items-center justify-center text-white">
                <span class="text-base font-normal">Продолжить</span>
            </button>
        </div>
    </div>

    <!-- Модальное окно Telegram ID -->
    <div id="telegramModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-3xl p-6 mx-4 max-w-sm w-full modal-enter relative">
            <!-- Крестик закрытия -->
            <button onclick="closeTelegramModal()" class="absolute top-4 right-4 w-8 h-8 flex items-center justify-center text-gray-400 hover:text-gray-600">
                <i class="fas fa-times text-xl"></i>
            </button>
            
            <!-- Картинка -->
            <div class="mb-4 mt-2">
                <img src="https://cdn.qwenlm.ai/72327e40-02c9-46e7-a011-0542655a56ad/497dc001-126e-4b2a-b9fe-92d13d35d6fc_%D0%98%D0%BB%D0%BB%D1%8E%D1%81%D1%82%D1%80%D0%B0%D1%86%D0%B8%D1%8F_%D0%B1%D0%B5%D0%B7_%D0%BD%D0%B0%D0%B7%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F%201.png?key=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyZXNvdXJjZV91c2VyX2lkIjoiNzIzMjdlNDAtMDJjOS00NmU3LWEwMTEtMDU0MjY1NWE1NmFkIiwicmVzb3VyY2VfaWQiOiI0OTdkYzAwMS0xMjZlLTRiMmEtYjlmZS05MmQxM2QzNWQ2ZmMiLCJyZXNvdXJjZV9jaGF0X2lkIjpudWxsfQ.yiCZ68kVCdXRViZgiU9eI-cm-o4raurJuCtaUwTF4sY&x-oss-process=image/resize,m_mfit,w_320,h_320" 
                     alt="Telegram ID" 
                     class="w-full h-32 object-cover rounded-2xl">
            </div>
            
            <!-- Заголовок и описание -->
            <div class="space-y-3">
                <h3 class="text-xl font-semibold text-gray-900">Telegram ID</h3>
                <p class="text-gray-600 text-sm leading-relaxed">
                    Быстрая регистрация через ваш Telegram аккаунт. Доступ к дополнительным функциям и синхронизация данных.
                </p>
            </div>

            <!-- Кнопка Продолжить -->
            <button onclick="closeTelegramModal()" class="w-full mt-6 bg-apple-blue rounded-2xl py-4 px-6 border-0 flex items-center justify-center text-white">
                <span class="text-base font-normal">Продолжить</span>
            </button>
        </div>
    </div>

    <!-- Шапка -->
    <header class="bg-transparent py-6 px-4 w-full">
        <div class="text-center">
            <span class="text-base opacity-50 font-normal block mb-1">Добро пожаловать в</span>
            <span class="main-font text-apple-blue text-4xl">main</span>
        </div>
    </header>

    <!-- Основной контент -->
    <div class="flex-1 flex items-center justify-center container-mobile p-4">
        <div class="w-full max-w-sm">
            <!-- Круг для аватарки -->
            <div class="relative mb-8 flex justify-center">
                <div class="w-32 h-32 avatar-mobile rounded-full border-2 border-dashed border-gray-300 flex items-center justify-center cursor-pointer avatar-circle"
                     onclick="document.getElementById('avatarInput').click()">
                    <i class="fas fa-plus text-3xl text-gray-400" id="plusIcon"></i>
                    <img id="avatarPreview" class="w-full h-full rounded-full object-cover hidden" alt="Аватар">
                </div>
                <input type="file" id="avatarInput" accept="image/*" class="hidden" onchange="handleAvatarSelect(event)">
            </div>

            <!-- Поле ввода имени -->
            <div class="relative mb-6">
                <input 
                    type="text" 
                    id="username"
                    maxlength="12"
                    placeholder="Имя"
                    class="w-full bg-transparent border-0 border-b border-gray-300 px-0 py-3 text-lg focus:outline-none focus:border-apple-blue placeholder-gray-400"
                    autocomplete="off"
                >
                <!-- Счетчик символов -->
                <div class="absolute right-0 top-3 text-sm text-gray-400">
                    <span id="charCount">0</span>/12
                </div>
                <!-- Сообщение об ошибке -->
                <div id="nameError" class="absolute -bottom-6 left-0 text-red-500 text-sm hidden"></div>
            </div>

            <!-- Две кнопки в ряд -->
            <div class="flex gap-3 mb-4">
                <!-- Кнопка анонима -->
                <button onclick="showAnonymousModal()" class="flex-1 bg-gray-100 rounded-2xl py-4 px-4 border border-white flex items-center justify-center text-gray-600">
                    <i class="fas fa-masks-theater text-apple-blue mr-2 text-lg"></i>
                    <span class="text-base font-normal">Аноним</span>
                </button>

                <!-- Кнопка Telegram ID - ВСЕГДА СИНЯЯ -->
                <button onclick="showTelegramModal()" class="flex-1 bg-apple-blue rounded-2xl py-4 px-4 border border-white flex items-center justify-center text-white">
                    <i class="fab fa-telegram mr-2 text-lg"></i>
                    <span class="text-base font-normal">Telegram ID</span>
                </button>
            </div>

            <!-- Кнопка Отменить -->
            <button class="w-full bg-gray-100 rounded-2xl py-4 px-6 border border-white flex items-center justify-center text-gray-600">
                <span class="text-base font-normal">Отменить</span>
            </button>

            <!-- Подсказка -->
            <p class="text-center text-gray-500 text-sm mt-8 px-4">
                Присоединяйтесь к сообществу 
                <span class="main-font opacity-50 text-base">main</span>. 
                Расскажите свою историю.
            </p>
        </div>
    </div>

    <script>
        const usernameInput = document.getElementById('username');
        const charCount = document.getElementById('charCount');
        const nameError = document.getElementById('nameError');
        const plusIcon = document.getElementById('plusIcon');
        const avatarPreview = document.getElementById('avatarPreview');
        const avatarCircle = document.querySelector('.avatar-circle');
        const anonymousModal = document.getElementById('anonymousModal');
        const telegramModal = document.getElementById('telegramModal');

        // Паттерны для запрещенных имен (main и его вариации)
        const forbiddenNamesPatterns = [
            /^main$/gi,
            /^mаin$/gi, // с русской 'а'
            /^maіn$/gi, // с украинской 'і'
            /^mаіn$/gi, // с русской 'а' и украинской 'і'
            /^mein$/gi, // немецкий вариант
            /^meyn$/gi,
            /^måin$/gi, // скандинавские варианты
            /^mæin$/gi,
            /^mаin$/gi, // все возможные комбинации
            /^mаіn$/gi,
            /^mаin$/gi,
            /^mаin$/gi,
            /^mаin$/gi
        ];

        // Функция проверки на запрещенные имена
        function hasForbiddenName(text) {
            // Проверяем все паттерны запрещенных имен
            for (let pattern of forbiddenNamesPatterns) {
                if (pattern.test(text)) {
                    return true;
                }
            }
            return false;
        }

        // Обновление счетчика символов
        usernameInput.addEventListener('input', function() {
            const value = this.value;
            charCount.textContent = value.length;
            
            // Проверка на пробелы
            if (/\s/.test(value)) {
                showError('Пробелы не допускаются');
                return;
            }
            
            // Проверка минимальной длины
            if (value.length > 0 && value.length < 3) {
                showError('Минимум 3 символа');
                return;
            }
            
            // Проверка на запрещенные имена
            if (hasForbiddenName(value)) {
                showError('Неплохая попытка, но запрещено ;)');
                return;
            }
            
            // Если все проверки пройдены
            if (value.length >= 3) {
                hideError();
            }
        });

        // Функции для модальных окон
        function showAnonymousModal() {
            anonymousModal.classList.remove('hidden');
            anonymousModal.querySelector('.modal-enter').classList.remove('modal-exit');
        }

        function closeAnonymousModal() {
            const modalContent = anonymousModal.querySelector('.modal-enter');
            modalContent.classList.add('modal-exit');
            setTimeout(() => {
                anonymousModal.classList.add('hidden');
                modalContent.classList.remove('modal-exit');
            }, 150);
        }

        function showTelegramModal() {
            telegramModal.classList.remove('hidden');
            telegramModal.querySelector('.modal-enter').classList.remove('modal-exit');
        }

        function closeTelegramModal() {
            const modalContent = telegramModal.querySelector('.modal-enter');
            modalContent.classList.add('modal-exit');
            setTimeout(() => {
                telegramModal.classList.add('hidden');
                modalContent.classList.remove('modal-exit');
            }, 150);
        }

        // Закрытие модальных окон при клике на фон
        anonymousModal.addEventListener('click', function(e) {
            if (e.target === anonymousModal) {
                closeAnonymousModal();
            }
        });

        telegramModal.addEventListener('click', function(e) {
            if (e.target === telegramModal) {
                closeTelegramModal();
            }
        });

        // Обработка выбора аватарки
        function handleAvatarSelect(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    avatarPreview.src = e.target.result;
                    avatarPreview.classList.remove('hidden');
                    plusIcon.classList.add('hidden');
                    // Меняем пунктирную рамку на синюю сплошную
                    avatarCircle.classList.remove('border-dashed', 'border-gray-300');
                    avatarCircle.classList.add('border-solid', 'border-apple-blue', 'border-2');
                }
                reader.readAsDataURL(file);
            }
        }

        // Функции для работы с ошибками
        function showError(message) {
            nameError.textContent = message;
            nameError.classList.remove('hidden');
            usernameInput.classList.add('border-red-500');
        }

        function hideError() {
            nameError.classList.add('hidden');
            usernameInput.classList.remove('border-red-500');
        }

        // Убираем все эффекты наведения
        document.querySelectorAll('button').forEach(btn => {
            btn.addEventListener('mouseenter', () => {
                btn.style.transform = 'none';
            });
            btn.addEventListener('mouseleave', () => {
                btn.style.transform = 'none';
            });
        });

        // Адаптация для мобильных устройств
        function handleResize() {
            if (window.innerWidth < 640) {
                document.body.classList.add('text-sm');
            } else {
                document.body.classList.remove('text-sm');
            }
        }

        window.addEventListener('resize', handleResize);
        handleResize(); // Инициализация
    </script>
</body>
</html>
